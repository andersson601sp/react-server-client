{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/andersson/\\xC1rea de Trabalho/cursos/react/gerenciador-de-tarefas-api-cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{A}from'hookrouter';import{Table,Form}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus}from'@fortawesome/free-solid-svg-icons';import ItensListaTarefas from'./items-lista-tarefas';import Paginacao from'./paginacao';import Ordenacao from'./ordenacao';function ListarTarefas(){var ITENS_POR_PAG=3;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tarefas=_useState2[0],setTarefas=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),carregarTarefas=_useState4[0],setCarregarTarefas=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalItems=_useState6[0],setTotalItems=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),paginaAtual=_useState8[0],setPaginaAtual=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),ordenarAsc=_useState10[0],setOrdenarAsc=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),ordenarDesc=_useState12[0],setOrdenarDesc=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),filtroTarefa=_useState14[0],setFiltroTarefa=_useState14[1];//segundo parametro do useEffect serve para indicar qual useState chama este useEffect\nuseEffect(function(){function obterTarefas(){var tarefasDB=localStorage['tarefas'];var listaTarefas=tarefasDB?JSON.parse(tarefasDB):[];//filtrar\nlistaTarefas=listaTarefas.filter(/* '=== 0' => busca pelo inicio da string para buscar por qualquer parte da string usar '>= 0' */function(t){return t.nome.toLowerCase().indexOf(filtroTarefa.toLowerCase())>=0;});//Ordernar\nif(ordenarAsc){listaTarefas.sort(function(t1,t2){return t1.nome.toLowerCase()>t2.nome.toLowerCase()?1:-1;});}else if(ordenarDesc){listaTarefas.sort(function(t1,t2){return t1.nome.toLowerCase()<t2.nome.toLowerCase()?1:-1;});}//Paginacao\nsetTotalItems(listaTarefas.length);setTarefas(listaTarefas.splice((paginaAtual-1)*ITENS_POR_PAG,ITENS_POR_PAG));}//se nao foi carregado\nif(carregarTarefas){obterTarefas();setCarregarTarefas(false);}},[carregarTarefas,paginaAtual,ordenarAsc,ordenarDesc,filtroTarefa]);/*<<< aqui define quais objetos o useeffect vai monitorar */function handleMudarPagina(pagina){setPaginaAtual(pagina);setCarregarTarefas(true);}function handleOrdenar(event){event.preventDefault();if(!ordenarAsc&&!ordenarDesc||ordenarDesc){setOrdenarAsc(true);setOrdenarDesc(false);}else if(setOrdenarAsc){setOrdenarAsc(false);setOrdenarDesc(true);}else{setOrdenarAsc(false);setOrdenarDesc(false);}setCarregarTarefas(true);}function handleFiltrar(event){setFiltroTarefa(event.target.value);setCarregarTarefas(true);}return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Tarefas a fazer\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,\"data-testid\":\"tabela\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"/\",onClick:handleOrdenar,children:[\"Tarefa \\xA0\",/*#__PURE__*/_jsx(Ordenacao,{ordenarAsc:ordenarAsc,ordenarDesc:ordenarDesc})]})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsxs(A,{href:\"/cadastrar\",className:\"btn btn-success btn-sm\",\"data-testeid\":\"btn-nova-tarefa\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPlus}),\"\\xA0 Nova Tarefa\"]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:filtroTarefa,onChange:handleFiltrar,\"data-testid\":\"txt-tarefa\",className:\"filtro-tarefa\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"\\xA0\"})]})]}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(ItensListaTarefas,{tarefas:tarefas,recarregarTarefas:setCarregarTarefas})})]}),/*#__PURE__*/_jsx(Paginacao,{totalItems:totalItems,itemsPorPagina:ITENS_POR_PAG,paginaAtual:paginaAtual,mudarPagina:handleMudarPagina})]});}export default ListarTarefas;","map":{"version":3,"sources":["/home/andersson/Área de Trabalho/cursos/react/gerenciador-de-tarefas-api-cliente/src/listar/listar-tarefas.js"],"names":["useState","useEffect","A","Table","Form","FontAwesomeIcon","faPlus","ItensListaTarefas","Paginacao","Ordenacao","ListarTarefas","ITENS_POR_PAG","tarefas","setTarefas","carregarTarefas","setCarregarTarefas","totalItems","setTotalItems","paginaAtual","setPaginaAtual","ordenarAsc","setOrdenarAsc","ordenarDesc","setOrdenarDesc","filtroTarefa","setFiltroTarefa","obterTarefas","tarefasDB","localStorage","listaTarefas","JSON","parse","filter","t","nome","toLowerCase","indexOf","sort","t1","t2","length","splice","handleMudarPagina","pagina","handleOrdenar","event","preventDefault","handleFiltrar","target","value"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'; \nimport { A } from 'hookrouter';\nimport { Table, Form } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport ItensListaTarefas from './items-lista-tarefas';\nimport Paginacao from  './paginacao';\nimport Ordenacao from './ordenacao';\n\nfunction ListarTarefas(){\n \n    const ITENS_POR_PAG = 3;\n\n    const [tarefas, setTarefas] = useState([]);\n    const [carregarTarefas, setCarregarTarefas] = useState(true);\n    const [totalItems, setTotalItems] = useState(0);\n    const [paginaAtual, setPaginaAtual] =  useState(1);\n    const [ordenarAsc, setOrdenarAsc] = useState(false);\n    const [ordenarDesc, setOrdenarDesc] = useState(false);\n    const [filtroTarefa, setFiltroTarefa] = useState('');\n\n\n    //segundo parametro do useEffect serve para indicar qual useState chama este useEffect\n    useEffect(() => {\n\n        function obterTarefas(){\n            const tarefasDB = localStorage['tarefas'];\n            let listaTarefas = tarefasDB ? JSON.parse(tarefasDB) : [];\n\n            //filtrar\n            listaTarefas = listaTarefas.filter(\n                /* '=== 0' => busca pelo inicio da string para buscar por qualquer parte da string usar '>= 0' */\n                t => t.nome.toLowerCase().indexOf(filtroTarefa.toLowerCase()) >= 0 \n            );\n\n            //Ordernar\n            if(ordenarAsc){\n                listaTarefas.sort((t1, t2) => (t1.nome.toLowerCase() > t2.nome.toLowerCase()) ? 1 : -1);    \n            }\n            else if(ordenarDesc){\n                listaTarefas.sort((t1, t2) => (t1.nome.toLowerCase() < t2.nome.toLowerCase()) ? 1 : -1);\n            }\n\n            //Paginacao\n            setTotalItems(listaTarefas.length);\n            setTarefas(listaTarefas.splice((paginaAtual - 1) * ITENS_POR_PAG, ITENS_POR_PAG));\n        }\n        \n        //se nao foi carregado\n        if(carregarTarefas){\n            obterTarefas();\n            setCarregarTarefas(false);\n        }\n        \n    }, [carregarTarefas, paginaAtual, ordenarAsc, ordenarDesc, filtroTarefa]);/*<<< aqui define quais objetos o useeffect vai monitorar */\n\n    function handleMudarPagina(pagina){\n       setPaginaAtual(pagina);\n       setCarregarTarefas(true);\n    }\n\n    function handleOrdenar(event){\n        event.preventDefault();\n        if((!ordenarAsc && !ordenarDesc) || ordenarDesc){\n            setOrdenarAsc(true);\n            setOrdenarDesc(false);\n        }\n        else if(setOrdenarAsc){\n            setOrdenarAsc(false);\n            setOrdenarDesc(true);\n        } \n        else {\n            setOrdenarAsc(false);\n            setOrdenarDesc(false);\n        }\n        setCarregarTarefas(true);\n    }\n\n    function handleFiltrar(event){\n       setFiltroTarefa(event.target.value);\n       setCarregarTarefas(true);\n    }\n\n    return (\n       <div className=\"text-center\">\n           <h3>Tarefas a fazer</h3>\n           <Table striped bordered hover responsive data-testid=\"tabela\">\n               <thead>\n                   <tr>\n                       <th>\n                           <a href=\"/\" onClick={handleOrdenar}>\n                           Tarefa\n                           &nbsp;\n                           <Ordenacao\n                            ordenarAsc={ordenarAsc}\n                            ordenarDesc={ordenarDesc} />\n                           </a>\n                        </th>\n                       <th>\n                           <A href=\"/cadastrar\"\n                              className=\"btn btn-success btn-sm\"\n                              data-testeid=\"btn-nova-tarefa\" >\n                                  <FontAwesomeIcon icon={faPlus} />\n                                  &nbsp;\n                                  Nova Tarefa\n                              </A>\n                       </th>\n                   </tr>\n                   <tr>\n                       <th>\n                           <Form.Control\n                             type=\"text\"\n                             value={filtroTarefa}\n                             onChange={handleFiltrar}\n                             data-testid=\"txt-tarefa\" \n                             className=\"filtro-tarefa\" />\n                       </th>\n                       <th>&nbsp;</th>\n                   </tr>\n               </thead>\n               <tbody>\n                    <ItensListaTarefas \n                    tarefas={tarefas}\n                    recarregarTarefas={setCarregarTarefas}\n                    />\n               </tbody>\n           </Table>\n           <Paginacao \n            totalItems={totalItems}\n            itemsPorPagina={ITENS_POR_PAG}\n            paginaAtual={paginaAtual}\n            mudarPagina={handleMudarPagina} />\n       </div>\n    )\n}\n\n\nexport default ListarTarefas;"]},"metadata":{},"sourceType":"module"}