{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/andersson/\\xC1rea de Trabalho/cursos/react/gerenciador-de-tarefas-api-cliente/src/listar/listar-tarefas.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { A } from 'hookrouter';\nimport { Table, Form } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport ItensListaTarefas from './itens-lista-tarefas';\nimport Paginacao from './paginacao';\nimport Ordenacao from './ordenacao';\nimport axios from 'axios';\n\nfunction ListarTarefas() {\n  _s();\n\n  const ITENS_POR_PAG = 3;\n  const API_URL_LISTAR_TAREFAS = 'http://localhost:3001/gerenciador-tarefas';\n  const [tarefas, setTarefas] = useState([]);\n  const [carregarTarefas, setCarregarTarefas] = useState(true);\n  const [totalItens, setTotalItens] = useState(0);\n  const [paginaAtual, setPaginaAtual] = useState(1);\n  const [ordenarAsc, setOrdenarAsc] = useState(false);\n  const [ordenarDesc, setOrdenarDesc] = useState(false);\n  const [filtroTarefa, setFiltroTarefa] = useState(''); //segundo parametro do useEffect serve para indicar qual useState chama este useEffect\n\n  useEffect(() => {\n    async function obterTarefas() {\n      //ordenar\n      let ordem = '';\n\n      if (ordenarAsc) {\n        ordem = 'ASC';\n      } else if (ordenarDesc) {\n        ordem = 'DESC';\n      }\n\n      try {\n        const params = `?pag=${paginaAtual}&ordem=${ordem}&filtro-tarefa=${filtroTarefa}`;\n        let {\n          data\n        } = await axios.get(API_URL_LISTAR_TAREFAS + params);\n        setTotalItens(data.totalItens);\n        setTarefas(data.tarefas);\n      } catch (err) {\n        setTarefas([]);\n      }\n    } //se nao foi carregado\n\n\n    if (carregarTarefas) {\n      obterTarefas();\n      setCarregarTarefas(false);\n    }\n  }, [carregarTarefas, paginaAtual, ordenarAsc, ordenarDesc, filtroTarefa]);\n  /*<<< aqui define quais objetos o useeffect vai monitorar */\n\n  function handleMudarPagina(pagina) {\n    setPaginaAtual(pagina);\n    setCarregarTarefas(true);\n  }\n\n  function handleOrdenar(event) {\n    event.preventDefault();\n\n    if (!ordenarAsc && !ordenarDesc || ordenarDesc) {\n      setOrdenarAsc(true);\n      setOrdenarDesc(false);\n    } else if (setOrdenarAsc) {\n      setOrdenarAsc(false);\n      setOrdenarDesc(true);\n    } else {\n      setOrdenarAsc(false);\n      setOrdenarDesc(false);\n    }\n\n    setCarregarTarefas(true);\n  }\n\n  function handleFiltrar(event) {\n    setFiltroTarefa(event.target.value);\n    setCarregarTarefas(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Tarefas a fazer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      responsive: true,\n      \"data-testid\": \"tabela\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/\",\n              onClick: handleOrdenar,\n              children: [\"Tarefa \\xA0\", /*#__PURE__*/_jsxDEV(Ordenacao, {\n                ordenarAsc: ordenarAsc,\n                ordenarDesc: ordenarDesc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 28\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(A, {\n              href: \"/cadastrar\",\n              className: \"btn btn-success btn-sm\",\n              \"data-testeid\": \"btn-nova-tarefa\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faPlus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 35\n              }, this), \"\\xA0 Nova Tarefa\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 28\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              value: filtroTarefa,\n              onChange: handleFiltrar,\n              \"data-testid\": \"txt-tarefa\",\n              className: \"filtro-tarefa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 28\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: /*#__PURE__*/_jsxDEV(ItensListaTarefas, {\n          tarefas: tarefas,\n          recarregarTarefas: setCarregarTarefas\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Paginacao, {\n      totalItens: totalItens,\n      itensPorPagina: ITENS_POR_PAG,\n      paginaAtual: paginaAtual,\n      mudarPagina: handleMudarPagina\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 8\n  }, this);\n}\n\n_s(ListarTarefas, \"XLanf0bNNG/1Ng24AisNfZgCUUk=\");\n\n_c = ListarTarefas;\nexport default ListarTarefas;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListarTarefas\");","map":{"version":3,"sources":["/home/andersson/Ãrea de Trabalho/cursos/react/gerenciador-de-tarefas-api-cliente/src/listar/listar-tarefas.js"],"names":["useState","useEffect","A","Table","Form","FontAwesomeIcon","faPlus","ItensListaTarefas","Paginacao","Ordenacao","axios","ListarTarefas","ITENS_POR_PAG","API_URL_LISTAR_TAREFAS","tarefas","setTarefas","carregarTarefas","setCarregarTarefas","totalItens","setTotalItens","paginaAtual","setPaginaAtual","ordenarAsc","setOrdenarAsc","ordenarDesc","setOrdenarDesc","filtroTarefa","setFiltroTarefa","obterTarefas","ordem","params","data","get","err","handleMudarPagina","pagina","handleOrdenar","event","preventDefault","handleFiltrar","target","value"],"mappings":";;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,CAAT,QAAkB,YAAlB;AACA,SAASC,KAAT,EAAgBC,IAAhB,QAA4B,iBAA5B;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,MAAT,QAAuB,mCAAvB;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,OAAOC,SAAP,MAAuB,aAAvB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,aAAT,GAAwB;AAAA;;AAEpB,QAAMC,aAAa,GAAG,CAAtB;AACA,QAAMC,sBAAsB,GAAG,2CAA/B;AAEA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACgB,eAAD,EAAkBC,kBAAlB,IAAwCjB,QAAQ,CAAC,IAAD,CAAtD;AACA,QAAM,CAACkB,UAAD,EAAaC,aAAb,IAA8BnB,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACoB,WAAD,EAAcC,cAAd,IAAiCrB,QAAQ,CAAC,CAAD,CAA/C;AACA,QAAM,CAACsB,UAAD,EAAaC,aAAb,IAA8BvB,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACwB,WAAD,EAAcC,cAAd,IAAgCzB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAAC0B,YAAD,EAAeC,eAAf,IAAkC3B,QAAQ,CAAC,EAAD,CAAhD,CAXoB,CAcpB;;AACAC,EAAAA,SAAS,CAAC,MAAM;AAEZ,mBAAe2B,YAAf,GAA8B;AAC1B;AACA,UAAIC,KAAK,GAAG,EAAZ;;AACA,UAAGP,UAAH,EAAc;AACVO,QAAAA,KAAK,GAAG,KAAR;AACH,OAFD,MAEO,IAAGL,WAAH,EAAe;AAClBK,QAAAA,KAAK,GAAG,MAAR;AACH;;AAED,UAAG;AACC,cAAMC,MAAM,GAAI,QAAOV,WAAY,UAASS,KAAM,kBAAiBH,YAAa,EAAhF;AACA,YAAI;AAAEK,UAAAA;AAAF,YAAY,MAAMrB,KAAK,CAACsB,GAAN,CAAUnB,sBAAsB,GAAGiB,MAAnC,CAAtB;AACAX,QAAAA,aAAa,CAACY,IAAI,CAACb,UAAN,CAAb;AACAH,QAAAA,UAAU,CAACgB,IAAI,CAACjB,OAAN,CAAV;AAEH,OAND,CAME,OAAMmB,GAAN,EAAU;AACRlB,QAAAA,UAAU,CAAC,EAAD,CAAV;AACH;AACJ,KApBW,CAsBZ;;;AACA,QAAGC,eAAH,EAAmB;AACfY,MAAAA,YAAY;AACZX,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACH;AAEJ,GA5BQ,EA4BN,CAACD,eAAD,EAAkBI,WAAlB,EAA+BE,UAA/B,EAA2CE,WAA3C,EAAwDE,YAAxD,CA5BM,CAAT;AA4B0E;;AAE1E,WAASQ,iBAAT,CAA2BC,MAA3B,EAAkC;AAC/Bd,IAAAA,cAAc,CAACc,MAAD,CAAd;AACAlB,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACF;;AAED,WAASmB,aAAT,CAAuBC,KAAvB,EAA6B;AACzBA,IAAAA,KAAK,CAACC,cAAN;;AACA,QAAI,CAAChB,UAAD,IAAe,CAACE,WAAjB,IAAiCA,WAApC,EAAgD;AAC5CD,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,MAAAA,cAAc,CAAC,KAAD,CAAd;AACH,KAHD,MAIK,IAAGF,aAAH,EAAiB;AAClBA,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,MAAAA,cAAc,CAAC,IAAD,CAAd;AACH,KAHI,MAIA;AACDF,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,MAAAA,cAAc,CAAC,KAAD,CAAd;AACH;;AACDR,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH;;AAED,WAASsB,aAAT,CAAuBF,KAAvB,EAA6B;AAC1BV,IAAAA,eAAe,CAACU,KAAK,CAACG,MAAN,CAAaC,KAAd,CAAf;AACAxB,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACF;;AAED,sBACG;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,KAAD;AAAO,MAAA,OAAO,MAAd;AAAe,MAAA,QAAQ,MAAvB;AAAwB,MAAA,KAAK,MAA7B;AAA8B,MAAA,UAAU,MAAxC;AAAyC,qBAAY,QAArD;AAAA,8BACI;AAAA,gCACI;AAAA,kCACI;AAAA,mCACI;AAAG,cAAA,IAAI,EAAC,GAAR;AAAY,cAAA,OAAO,EAAEmB,aAArB;AAAA,qDAGA,QAAC,SAAD;AACC,gBAAA,UAAU,EAAEd,UADb;AAEC,gBAAA,WAAW,EAAEE;AAFd;AAAA;AAAA;AAAA;AAAA,sBAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAUI;AAAA,mCACI,QAAC,CAAD;AAAG,cAAA,IAAI,EAAC,YAAR;AACG,cAAA,SAAS,EAAC,wBADb;AAEG,8BAAa,iBAFhB;AAAA,sCAGO,QAAC,eAAD;AAAiB,gBAAA,IAAI,EAAElB;AAAvB;AAAA;AAAA;AAAA;AAAA,sBAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAqBI;AAAA,kCACI;AAAA,mCACI,QAAC,IAAD,CAAM,OAAN;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,KAAK,EAAEoB,YAFT;AAGE,cAAA,QAAQ,EAAEa,aAHZ;AAIE,6BAAY,YAJd;AAKE,cAAA,SAAS,EAAC;AALZ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAkCI;AAAA,+BACK,QAAC,iBAAD;AACA,UAAA,OAAO,EAAEzB,OADT;AAEA,UAAA,iBAAiB,EAAEG;AAFnB;AAAA;AAAA;AAAA;AAAA;AADL;AAAA;AAAA;AAAA;AAAA,cAlCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eA2CI,QAAC,SAAD;AACC,MAAA,UAAU,EAAEC,UADb;AAEC,MAAA,cAAc,EAAEN,aAFjB;AAGC,MAAA,WAAW,EAAEQ,WAHd;AAIC,MAAA,WAAW,EAAEc;AAJd;AAAA;AAAA;AAAA;AAAA,YA3CJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADH;AAmDH;;GA3HQvB,a;;KAAAA,a;AA8HT,eAAeA,aAAf","sourcesContent":["import { useState, useEffect } from 'react'; \nimport { A } from 'hookrouter';\nimport { Table, Form } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport ItensListaTarefas from './itens-lista-tarefas';\nimport Paginacao from  './paginacao';\nimport Ordenacao from './ordenacao';\nimport axios from 'axios';\n\nfunction ListarTarefas(){\n \n    const ITENS_POR_PAG = 3;\n    const API_URL_LISTAR_TAREFAS = 'http://localhost:3001/gerenciador-tarefas'\n\n    const [tarefas, setTarefas] = useState([]);\n    const [carregarTarefas, setCarregarTarefas] = useState(true);\n    const [totalItens, setTotalItens] = useState(0);\n    const [paginaAtual, setPaginaAtual] =  useState(1);\n    const [ordenarAsc, setOrdenarAsc] = useState(false);\n    const [ordenarDesc, setOrdenarDesc] = useState(false);\n    const [filtroTarefa, setFiltroTarefa] = useState('');\n\n\n    //segundo parametro do useEffect serve para indicar qual useState chama este useEffect\n    useEffect(() => {\n\n        async function obterTarefas() {\n            //ordenar\n            let ordem = '';\n            if(ordenarAsc){\n                ordem = 'ASC';\n            } else if(ordenarDesc){\n                ordem = 'DESC';\n            }\n\n            try{\n                const params = `?pag=${paginaAtual}&ordem=${ordem}&filtro-tarefa=${filtroTarefa}`;\n                let { data } =  await axios.get(API_URL_LISTAR_TAREFAS + params);\n                setTotalItens(data.totalItens);\n                setTarefas(data.tarefas);\n\n            } catch(err){\n                setTarefas([]);     \n            }\n        }\n        \n        //se nao foi carregado\n        if(carregarTarefas){\n            obterTarefas();\n            setCarregarTarefas(false);\n        }\n        \n    }, [carregarTarefas, paginaAtual, ordenarAsc, ordenarDesc, filtroTarefa]);/*<<< aqui define quais objetos o useeffect vai monitorar */\n\n    function handleMudarPagina(pagina){\n       setPaginaAtual(pagina);\n       setCarregarTarefas(true);\n    }\n\n    function handleOrdenar(event){\n        event.preventDefault();\n        if((!ordenarAsc && !ordenarDesc) || ordenarDesc){\n            setOrdenarAsc(true);\n            setOrdenarDesc(false);\n        }\n        else if(setOrdenarAsc){\n            setOrdenarAsc(false);\n            setOrdenarDesc(true);\n        } \n        else {\n            setOrdenarAsc(false);\n            setOrdenarDesc(false);\n        }\n        setCarregarTarefas(true);\n    }\n\n    function handleFiltrar(event){\n       setFiltroTarefa(event.target.value);\n       setCarregarTarefas(true);\n    }\n\n    return (\n       <div className=\"text-center\">\n           <h3>Tarefas a fazer</h3>\n           <Table striped bordered hover responsive data-testid=\"tabela\">\n               <thead>\n                   <tr>\n                       <th>\n                           <a href=\"/\" onClick={handleOrdenar}>\n                           Tarefa\n                           &nbsp;\n                           <Ordenacao\n                            ordenarAsc={ordenarAsc}\n                            ordenarDesc={ordenarDesc} />\n                           </a>\n                        </th>\n                       <th>\n                           <A href=\"/cadastrar\"\n                              className=\"btn btn-success btn-sm\"\n                              data-testeid=\"btn-nova-tarefa\" >\n                                  <FontAwesomeIcon icon={faPlus} />\n                                  &nbsp;\n                                  Nova Tarefa\n                              </A>\n                       </th>\n                   </tr>\n                   <tr>\n                       <th>\n                           <Form.Control\n                             type=\"text\"\n                             value={filtroTarefa}\n                             onChange={handleFiltrar}\n                             data-testid=\"txt-tarefa\" \n                             className=\"filtro-tarefa\" />\n                       </th>\n                       <th>&nbsp;</th>\n                   </tr>\n               </thead>\n               <tbody>\n                    <ItensListaTarefas \n                    tarefas={tarefas}\n                    recarregarTarefas={setCarregarTarefas}\n                    />\n               </tbody>\n           </Table>\n           <Paginacao \n            totalItens={totalItens}\n            itensPorPagina={ITENS_POR_PAG}\n            paginaAtual={paginaAtual}\n            mudarPagina={handleMudarPagina} />\n       </div>\n    )\n}\n\n\nexport default ListarTarefas;"]},"metadata":{},"sourceType":"module"}