{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/andersson/\\xC1rea de Trabalho/cursos/react/gerenciador-de-tarefas-api-cliente/src/listar/listar-tarefas.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { A } from 'hookrouter';\nimport { Table, Form } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport ItensListaTarefas from './items-lista-tarefas';\nimport Paginacao from './paginacao';\nimport Ordenacao from './ordenacao';\n\nfunction ListarTarefas() {\n  _s();\n\n  const ITENS_POR_PAG = 3;\n  const [tarefas, setTarefas] = useState([]);\n  const [carregarTarefas, setCarregarTarefas] = useState(true);\n  const [totalItems, setTotalItems] = useState(0);\n  const [paginaAtual, setPaginaAtual] = useState(1);\n  const [ordenarAsc, setOrdenarAsc] = useState(false);\n  const [ordenarDesc, setOrdenarDesc] = useState(false);\n  const [filtroTarefa, setFiltroTarefa] = useState(''); //segundo parametro do useEffect serve para indicar qual useState chama este useEffect\n\n  useEffect(() => {\n    function obterTarefas() {\n      const tarefasDB = localStorage['tarefas'];\n      let listaTarefas = tarefasDB ? JSON.parse(tarefasDB) : []; //filtrar\n\n      listaTarefas = listaTarefas.filter(\n      /* '=== 0' => busca pelo inicio da string para buscar por qualquer parte da string usar '>= 0' */\n      t => t.nome.toLowerCase().indexOf(filtroTarefa.toLowerCase()) >= 0); //Ordernar\n\n      if (ordenarAsc) {\n        listaTarefas.sort((t1, t2) => t1.nome.toLowerCase() > t2.nome.toLowerCase() ? 1 : -1);\n      } else if (ordenarDesc) {\n        listaTarefas.sort((t1, t2) => t1.nome.toLowerCase() < t2.nome.toLowerCase() ? 1 : -1);\n      } //Paginacao\n\n\n      setTotalItems(listaTarefas.length);\n      setTarefas(listaTarefas.splice((paginaAtual - 1) * ITENS_POR_PAG, ITENS_POR_PAG));\n    } //se nao foi carregado\n\n\n    if (carregarTarefas) {\n      obterTarefas();\n      setCarregarTarefas(false);\n    }\n  }, [carregarTarefas, paginaAtual, ordenarAsc, ordenarDesc, filtroTarefa]);\n  /*<<< aqui define quais objetos o useeffect vai monitorar */\n\n  function handleMudarPagina(pagina) {\n    setPaginaAtual(pagina);\n    setCarregarTarefas(true);\n  }\n\n  function handleOrdenar(event) {\n    event.preventDefault();\n\n    if (!ordenarAsc && !ordenarDesc || ordenarDesc) {\n      setOrdenarAsc(true);\n      setOrdenarDesc(false);\n    } else if (setOrdenarAsc) {\n      setOrdenarAsc(false);\n      setOrdenarDesc(true);\n    } else {\n      setOrdenarAsc(false);\n      setOrdenarDesc(false);\n    }\n\n    setCarregarTarefas(true);\n  }\n\n  function handleFiltrar(event) {\n    setFiltroTarefa(event.target.value);\n    setCarregarTarefas(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Tarefas a fazer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      responsive: true,\n      \"data-testid\": \"tabela\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/\",\n              onClick: handleOrdenar,\n              children: [\"Tarefa \\xA0\", /*#__PURE__*/_jsxDEV(Ordenacao, {\n                ordenarAsc: ordenarAsc,\n                ordenarDesc: ordenarDesc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 28\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(A, {\n              href: \"/cadastrar\",\n              className: \"btn btn-success btn-sm\",\n              \"data-testeid\": \"btn-nova-tarefa\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faPlus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 35\n              }, this), \"\\xA0 Nova Tarefa\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 28\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              value: filtroTarefa,\n              onChange: handleFiltrar,\n              \"data-testid\": \"txt-tarefa\",\n              className: \"filtro-tarefa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 28\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: /*#__PURE__*/_jsxDEV(ItensListaTarefas, {\n          tarefas: tarefas,\n          recarregarTarefas: setCarregarTarefas\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Paginacao, {\n      totalItems: totalItems,\n      itemsPorPagina: ITENS_POR_PAG,\n      paginaAtual: paginaAtual,\n      mudarPagina: handleMudarPagina\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 8\n  }, this);\n}\n\n_s(ListarTarefas, \"/+OYMe4McUPA4Ocrpl3lbGhWRh4=\");\n\n_c = ListarTarefas;\nexport default ListarTarefas;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListarTarefas\");","map":{"version":3,"sources":["/home/andersson/Área de Trabalho/cursos/react/gerenciador-de-tarefas-api-cliente/src/listar/listar-tarefas.js"],"names":["useState","useEffect","A","Table","Form","FontAwesomeIcon","faPlus","ItensListaTarefas","Paginacao","Ordenacao","ListarTarefas","ITENS_POR_PAG","tarefas","setTarefas","carregarTarefas","setCarregarTarefas","totalItems","setTotalItems","paginaAtual","setPaginaAtual","ordenarAsc","setOrdenarAsc","ordenarDesc","setOrdenarDesc","filtroTarefa","setFiltroTarefa","obterTarefas","tarefasDB","localStorage","listaTarefas","JSON","parse","filter","t","nome","toLowerCase","indexOf","sort","t1","t2","length","splice","handleMudarPagina","pagina","handleOrdenar","event","preventDefault","handleFiltrar","target","value"],"mappings":";;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,CAAT,QAAkB,YAAlB;AACA,SAASC,KAAT,EAAgBC,IAAhB,QAA4B,iBAA5B;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,MAAT,QAAuB,mCAAvB;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AACA,OAAOC,SAAP,MAAuB,aAAvB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,SAASC,aAAT,GAAwB;AAAA;;AAEpB,QAAMC,aAAa,GAAG,CAAtB;AAEA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACc,eAAD,EAAkBC,kBAAlB,IAAwCf,QAAQ,CAAC,IAAD,CAAtD;AACA,QAAM,CAACgB,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACkB,WAAD,EAAcC,cAAd,IAAiCnB,QAAQ,CAAC,CAAD,CAA/C;AACA,QAAM,CAACoB,UAAD,EAAaC,aAAb,IAA8BrB,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACsB,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACwB,YAAD,EAAeC,eAAf,IAAkCzB,QAAQ,CAAC,EAAD,CAAhD,CAVoB,CAapB;;AACAC,EAAAA,SAAS,CAAC,MAAM;AAEZ,aAASyB,YAAT,GAAuB;AACnB,YAAMC,SAAS,GAAGC,YAAY,CAAC,SAAD,CAA9B;AACA,UAAIC,YAAY,GAAGF,SAAS,GAAGG,IAAI,CAACC,KAAL,CAAWJ,SAAX,CAAH,GAA2B,EAAvD,CAFmB,CAInB;;AACAE,MAAAA,YAAY,GAAGA,YAAY,CAACG,MAAb;AACX;AACAC,MAAAA,CAAC,IAAIA,CAAC,CAACC,IAAF,CAAOC,WAAP,GAAqBC,OAArB,CAA6BZ,YAAY,CAACW,WAAb,EAA7B,KAA4D,CAFtD,CAAf,CALmB,CAUnB;;AACA,UAAGf,UAAH,EAAc;AACVS,QAAAA,YAAY,CAACQ,IAAb,CAAkB,CAACC,EAAD,EAAKC,EAAL,KAAaD,EAAE,CAACJ,IAAH,CAAQC,WAAR,KAAwBI,EAAE,CAACL,IAAH,CAAQC,WAAR,EAAzB,GAAkD,CAAlD,GAAsD,CAAC,CAArF;AACH,OAFD,MAGK,IAAGb,WAAH,EAAe;AAChBO,QAAAA,YAAY,CAACQ,IAAb,CAAkB,CAACC,EAAD,EAAKC,EAAL,KAAaD,EAAE,CAACJ,IAAH,CAAQC,WAAR,KAAwBI,EAAE,CAACL,IAAH,CAAQC,WAAR,EAAzB,GAAkD,CAAlD,GAAsD,CAAC,CAArF;AACH,OAhBkB,CAkBnB;;;AACAlB,MAAAA,aAAa,CAACY,YAAY,CAACW,MAAd,CAAb;AACA3B,MAAAA,UAAU,CAACgB,YAAY,CAACY,MAAb,CAAoB,CAACvB,WAAW,GAAG,CAAf,IAAoBP,aAAxC,EAAuDA,aAAvD,CAAD,CAAV;AACH,KAvBW,CAyBZ;;;AACA,QAAGG,eAAH,EAAmB;AACfY,MAAAA,YAAY;AACZX,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACH;AAEJ,GA/BQ,EA+BN,CAACD,eAAD,EAAkBI,WAAlB,EAA+BE,UAA/B,EAA2CE,WAA3C,EAAwDE,YAAxD,CA/BM,CAAT;AA+B0E;;AAE1E,WAASkB,iBAAT,CAA2BC,MAA3B,EAAkC;AAC/BxB,IAAAA,cAAc,CAACwB,MAAD,CAAd;AACA5B,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACF;;AAED,WAAS6B,aAAT,CAAuBC,KAAvB,EAA6B;AACzBA,IAAAA,KAAK,CAACC,cAAN;;AACA,QAAI,CAAC1B,UAAD,IAAe,CAACE,WAAjB,IAAiCA,WAApC,EAAgD;AAC5CD,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,MAAAA,cAAc,CAAC,KAAD,CAAd;AACH,KAHD,MAIK,IAAGF,aAAH,EAAiB;AAClBA,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,MAAAA,cAAc,CAAC,IAAD,CAAd;AACH,KAHI,MAIA;AACDF,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,MAAAA,cAAc,CAAC,KAAD,CAAd;AACH;;AACDR,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH;;AAED,WAASgC,aAAT,CAAuBF,KAAvB,EAA6B;AAC1BpB,IAAAA,eAAe,CAACoB,KAAK,CAACG,MAAN,CAAaC,KAAd,CAAf;AACAlC,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACF;;AAED,sBACG;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,KAAD;AAAO,MAAA,OAAO,MAAd;AAAe,MAAA,QAAQ,MAAvB;AAAwB,MAAA,KAAK,MAA7B;AAA8B,MAAA,UAAU,MAAxC;AAAyC,qBAAY,QAArD;AAAA,8BACI;AAAA,gCACI;AAAA,kCACI;AAAA,mCACI;AAAG,cAAA,IAAI,EAAC,GAAR;AAAY,cAAA,OAAO,EAAE6B,aAArB;AAAA,qDAGA,QAAC,SAAD;AACC,gBAAA,UAAU,EAAExB,UADb;AAEC,gBAAA,WAAW,EAAEE;AAFd;AAAA;AAAA;AAAA;AAAA,sBAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAUI;AAAA,mCACI,QAAC,CAAD;AAAG,cAAA,IAAI,EAAC,YAAR;AACG,cAAA,SAAS,EAAC,wBADb;AAEG,8BAAa,iBAFhB;AAAA,sCAGO,QAAC,eAAD;AAAiB,gBAAA,IAAI,EAAEhB;AAAvB;AAAA;AAAA;AAAA;AAAA,sBAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAqBI;AAAA,kCACI;AAAA,mCACI,QAAC,IAAD,CAAM,OAAN;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,KAAK,EAAEkB,YAFT;AAGE,cAAA,QAAQ,EAAEuB,aAHZ;AAIE,6BAAY,YAJd;AAKE,cAAA,SAAS,EAAC;AALZ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAkCI;AAAA,+BACK,QAAC,iBAAD;AACA,UAAA,OAAO,EAAEnC,OADT;AAEA,UAAA,iBAAiB,EAAEG;AAFnB;AAAA;AAAA;AAAA;AAAA;AADL;AAAA;AAAA;AAAA;AAAA,cAlCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eA2CI,QAAC,SAAD;AACC,MAAA,UAAU,EAAEC,UADb;AAEC,MAAA,cAAc,EAAEL,aAFjB;AAGC,MAAA,WAAW,EAAEO,WAHd;AAIC,MAAA,WAAW,EAAEwB;AAJd;AAAA;AAAA;AAAA;AAAA,YA3CJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADH;AAmDH;;GA7HQhC,a;;KAAAA,a;AAgIT,eAAeA,aAAf","sourcesContent":["import { useState, useEffect } from 'react'; \nimport { A } from 'hookrouter';\nimport { Table, Form } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport ItensListaTarefas from './items-lista-tarefas';\nimport Paginacao from  './paginacao';\nimport Ordenacao from './ordenacao';\n\nfunction ListarTarefas(){\n \n    const ITENS_POR_PAG = 3;\n\n    const [tarefas, setTarefas] = useState([]);\n    const [carregarTarefas, setCarregarTarefas] = useState(true);\n    const [totalItems, setTotalItems] = useState(0);\n    const [paginaAtual, setPaginaAtual] =  useState(1);\n    const [ordenarAsc, setOrdenarAsc] = useState(false);\n    const [ordenarDesc, setOrdenarDesc] = useState(false);\n    const [filtroTarefa, setFiltroTarefa] = useState('');\n\n\n    //segundo parametro do useEffect serve para indicar qual useState chama este useEffect\n    useEffect(() => {\n\n        function obterTarefas(){\n            const tarefasDB = localStorage['tarefas'];\n            let listaTarefas = tarefasDB ? JSON.parse(tarefasDB) : [];\n\n            //filtrar\n            listaTarefas = listaTarefas.filter(\n                /* '=== 0' => busca pelo inicio da string para buscar por qualquer parte da string usar '>= 0' */\n                t => t.nome.toLowerCase().indexOf(filtroTarefa.toLowerCase()) >= 0 \n            );\n\n            //Ordernar\n            if(ordenarAsc){\n                listaTarefas.sort((t1, t2) => (t1.nome.toLowerCase() > t2.nome.toLowerCase()) ? 1 : -1);    \n            }\n            else if(ordenarDesc){\n                listaTarefas.sort((t1, t2) => (t1.nome.toLowerCase() < t2.nome.toLowerCase()) ? 1 : -1);\n            }\n\n            //Paginacao\n            setTotalItems(listaTarefas.length);\n            setTarefas(listaTarefas.splice((paginaAtual - 1) * ITENS_POR_PAG, ITENS_POR_PAG));\n        }\n        \n        //se nao foi carregado\n        if(carregarTarefas){\n            obterTarefas();\n            setCarregarTarefas(false);\n        }\n        \n    }, [carregarTarefas, paginaAtual, ordenarAsc, ordenarDesc, filtroTarefa]);/*<<< aqui define quais objetos o useeffect vai monitorar */\n\n    function handleMudarPagina(pagina){\n       setPaginaAtual(pagina);\n       setCarregarTarefas(true);\n    }\n\n    function handleOrdenar(event){\n        event.preventDefault();\n        if((!ordenarAsc && !ordenarDesc) || ordenarDesc){\n            setOrdenarAsc(true);\n            setOrdenarDesc(false);\n        }\n        else if(setOrdenarAsc){\n            setOrdenarAsc(false);\n            setOrdenarDesc(true);\n        } \n        else {\n            setOrdenarAsc(false);\n            setOrdenarDesc(false);\n        }\n        setCarregarTarefas(true);\n    }\n\n    function handleFiltrar(event){\n       setFiltroTarefa(event.target.value);\n       setCarregarTarefas(true);\n    }\n\n    return (\n       <div className=\"text-center\">\n           <h3>Tarefas a fazer</h3>\n           <Table striped bordered hover responsive data-testid=\"tabela\">\n               <thead>\n                   <tr>\n                       <th>\n                           <a href=\"/\" onClick={handleOrdenar}>\n                           Tarefa\n                           &nbsp;\n                           <Ordenacao\n                            ordenarAsc={ordenarAsc}\n                            ordenarDesc={ordenarDesc} />\n                           </a>\n                        </th>\n                       <th>\n                           <A href=\"/cadastrar\"\n                              className=\"btn btn-success btn-sm\"\n                              data-testeid=\"btn-nova-tarefa\" >\n                                  <FontAwesomeIcon icon={faPlus} />\n                                  &nbsp;\n                                  Nova Tarefa\n                              </A>\n                       </th>\n                   </tr>\n                   <tr>\n                       <th>\n                           <Form.Control\n                             type=\"text\"\n                             value={filtroTarefa}\n                             onChange={handleFiltrar}\n                             data-testid=\"txt-tarefa\" \n                             className=\"filtro-tarefa\" />\n                       </th>\n                       <th>&nbsp;</th>\n                   </tr>\n               </thead>\n               <tbody>\n                    <ItensListaTarefas \n                    tarefas={tarefas}\n                    recarregarTarefas={setCarregarTarefas}\n                    />\n               </tbody>\n           </Table>\n           <Paginacao \n            totalItems={totalItems}\n            itemsPorPagina={ITENS_POR_PAG}\n            paginaAtual={paginaAtual}\n            mudarPagina={handleMudarPagina} />\n       </div>\n    )\n}\n\n\nexport default ListarTarefas;"]},"metadata":{},"sourceType":"module"}